{"version":3,"sources":["velo-lulu/ezgif.com-crop.gif","serviceWorker.js","Donut.js","Icon.js","ApiState.js","Table.js","Popup.js","MarClus.js","Api.js","Routeur.js","Gps.js","App.js","QrCode.js","ReactRout.js","index.js"],"names":["module","exports","Boolean","window","location","hostname","match","SVGIconComponent","perc","this","props","percc","perccc","width","height","viewBox","className","aria-labelledby","role","cx","cy","r","fill","stroke","strokeWidth","strokeDasharray","strokeDashoffset","x","y","d","Component","redIcon","L","Icon","iconUrl","shadowUrl","iconSize","iconAnchor","popupAnchor","shadowSize","blackIcon","divIcon","html","donutIcon","key","keyy","keyyy","ReactDOMServer","renderToString","ApiState","json","option","method","url","data","JSON","stringify","responseType","axios","then","response","console","log","catch","error","TableComponent","name","meca","elec","libre","ava","broke_m","broke_e","icon","faCheck","size","faTimes","faBicycle","color","createButton","label","container","btn","DomUtil","create","setAttribute","innerHTML","createButtonLink","code","type","toString","createText","popEvent","mecaa","elecc","active","avaa","capa","pss","popHome","popHomeProb","popHomeProbVel","problemSA","problemSAOui","problemSANon","problemVel","problemVelMec","problemVelEle","popHomeStationNonActive","popHomeStationNonActiveChang","PopQrCode","mcgg","markerClusterGroup","customOptions","marker","addTo","bindPopup","openPopup","addLayer","buttonChang","get","DomEvent","addListener","e","closePopup","buttonSubmit","buttonSubmitNon","buttonSubmitOui","buttonVelib","buttonVelibMec","buttonVelibEle","removeLayer","require","MarkerCluster","context","useLeafletContext","stations","pro","useEffect","mcg","Object","entries","map","station","fields","mechanical","ebike","numdocksavailable","coordonnees_geo","capacity","numbikesavailable","broke_ebike","length","broke_mechanical","pop","layerContainer","Api","control","ll","i","stationcode","is_returning","spliceWaypoints","removeControl","Rout","refcount","useRef","Routing","show","geocoder","Control","Geocoder","nominatim","router","osrmv1","serviceUrl","profile","routeWhileDragging","reverseWaypoints","createMarker","wp","nWps","latLng","addControl","err","errorControl","search","geosearch","position","useMapBounds","zoomToResult","expanded","placeholder","title","on","latlng","current","alert","message","Gps","gps","autoActive","autoCenter","maxZoom","autoUpdate","fetcher","fetch","App","useSwr","result","src","logo","id","MapContainer","center","zoom","zoomControl","LayersControl","BaseLayer","TileLayer","attribution","checked","Overlay","ExampleM","state","delay","handleScan","bind","setState","history","push","style","onError","handleError","onScan","ExampleE","RR","exact","path","component","ReactDOM","render","StrictMode","document","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.f8d3560b.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/ezgif.com-crop.0d28c576.gif\";","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React, {Component} from 'react';\nimport \"./App.css\";\n\nexport default class SVGIconComponent extends Component {\n  render() {\n    const perc = this.props.perc || 0;\n    const percc = this.props.percc || 0;\n    const perccc = this.props.perccc || 0;\n\n    return (\n      <svg width=\"80px\" height=\"80px\" viewBox=\"0 0 50 50\" className=\"donut\" aria-labelledby=\"beers-title beers-desc\" role=\"img\">\n        <circle className=\"donut-hole\" cx=\"12\" cy=\"8\" r=\"4\" fill=\"white\" role=\"presentation\"></circle>\n        <circle className=\"donut-ring\" cx=\"12\" cy=\"8\" r=\"5\" fill=\"transparent\" stroke=\"#d2d3d4\" strokeWidth=\"5\" role=\"presentation\"></circle>\n        <circle className=\"donut-segment\" cx=\"12\" cy=\"8\" r=\"5\" fill=\"transparent\" stroke=\"#ce4b99\" strokeWidth=\"5\" strokeDasharray={`${percc}, ${perccc}`} strokeDashoffset=\"0\" aria-labelledby=\"donut-segment-1-title donut-segment-1-desc\">\n        </circle>\n        <g className=\"chart-text\">\n          <text className=\"chart-number\" x=\"40%\" y=\"25%\">\n            {perc}\n          </text>\n        </g>\n        <path d=\"M12 10c-1.104 0-2-.896-2-2s.896-2 2-2 2 .896 2 2-.896 2-2 2m0-5c-1.657 0-3 1.343-3 3s1.343 3 3 3 3-1.343 3-3-1.343-3-3-3m-7 2.602c0-3.517 3.271-6.602 7-6.602s7 3.085 7 6.602c0 3.455-2.563 7.543-7 14.527-4.489-7.073-7-11.072-7-14.527m7-7.602c-4.198 0-8 3.403-8 7.602 0 4.198 3.469 9.21 8 16.398 4.531-7.188 8-12.2 8-16.398 0-4.199-3.801-7.602-8-7.602\"/>\n      </svg>\n    );\n  }\n}\n","import React from 'react';\nimport L from 'leaflet';\nimport SVGIconComponent from './Donut';\nimport ReactDOMServer from 'react-dom/server';\n\nexport const greenIcon = new L.Icon({\n    iconUrl: 'https://cdn.rawgit.com/pointhi/leaflet-color-markers/master/img/marker-icon-2x-green.png',\n    shadowUrl: 'https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.3.4/images/marker-shadow.png',\n    iconSize: [25, 41],\n    iconAnchor: [12, 41],\n    popupAnchor: [1, -34],\n    shadowSize: [41, 41]\n  });\n\nexport const redIcon = new L.Icon({\n    iconUrl: 'https://raw.githubusercontent.com/pointhi/leaflet-color-markers/master/img/marker-icon-red.png',\n    shadowUrl: 'https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.3.4/images/marker-shadow.png',\n    iconSize: [25, 41],\n    iconAnchor: [12, 41],\n    popupAnchor: [1, -34],\n    shadowSize: [41, 41]\n  });\n\nexport const blackIcon = new L.divIcon({\n    className: 'custom-div-icon',\n    html: \"<div style='background-color:#000000;' class='marker-pin'></div>\",\n    iconSize: [10, 10],\n    iconAnchor: [-6, -15]\n  });\n\n\nexport function donutIcon(key, keyy, keyyy){\n  return(\n    new L.divIcon({\n      className: 'custom-icon',\n      html: ReactDOMServer.renderToString(<SVGIconComponent perc={key} percc={keyy} perccc={keyyy}/>),\n      iconAnchor: [18, 28],\n      popupAnchor: [0, -30]\n    })\n  )\n}\n","import axios from 'axios';\n\n\nfunction ApiState(json) {\n    const option = {\n      method: 'post',\n      url: 'https://terjack.space/state',\n      data: JSON.stringify(json),\n      responseType: 'json',\n    };\n    axios(option)\n    .then(function (response) {\n      console.log(response.data);\n      console.log('here we go station state!!!!');\n    })\n    .catch(function (error) {\n      console.log(error);\n    });\n  \n    return null\n  \n}\n\nexport default ApiState;\n","import React, {Component} from 'react';\nimport \"./Table.css\";\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\nimport { faBicycle, faTimes, faCheck } from '@fortawesome/free-solid-svg-icons'\n\nexport default class TableComponent extends Component {\n  render() {\n    const name = this.props.name || 0;\n    const meca = this.props.meca || 0;\n    const elec = this.props.elec || 0;\n    const ava = this.props.ava || 0;\n    const libre = this.props.libre || 0;\n    const broke_m = this.props.broke_m || 0;\n    const broke_e = this.props.broke_e || 0;\n    return (\n            <body>\n                <div className=\"table-title\">\n                <h3>{name}</h3>\n                </div>\n\n                <table className=\"table-fill\">\n                    <thead>\n                        <tr>\n                        <th className=\"text-title\">Vélib'</th>\n                        <th> <FontAwesomeIcon icon={faCheck} size=\"2x\"/> </th>\n                        <th> <FontAwesomeIcon icon={faTimes} size=\"2x\"/> </th>\n                        </tr>\n                    </thead>\n\n                    <tbody className=\"table-hover\">\n                        <tr>\n                        <td className=\"ava\"> <FontAwesomeIcon icon={faBicycle} size=\"2x\" color=\"green\" /> méca </td>\n                        <td className=\"text-left\">{meca}</td>\n                        <td className=\"text-left\">{broke_m}</td>\n                        </tr>\n                        <tr>\n                        <td className=\"ava\"> <FontAwesomeIcon icon={faBicycle} size=\"2x\" color=\"blue\"/> élec</td>\n                        <td className=\"text-left\">{elec}</td>\n                        <td className=\"text-left\">{broke_e}</td>\n                        </tr>\n                    </tbody>\n                </table>\n\n                <div className=\"table-subtitle\">\n                    <h4>Il reste <b className=\"ava\">{libre}</b> places disponibles!</h4>\n                </div>\n\n            </body>\n    );\n  }\n}","import React from 'react';\nimport L from 'leaflet';\nimport {donutIcon} from \"./Icon\";\nimport ApiState from \"./ApiState\"\nimport TableComponent from './Table';\nimport ReactDOMServer from 'react-dom/server';\nimport './App.css'\n\nrequire('leaflet.markercluster');\n\nfunction createButton(label, container) {\n  const btn = L.DomUtil.create('button', '', container);\n  btn.setAttribute('type', 'button');\n  btn.innerHTML = label;\n  return btn;\n}\n\nfunction createButtonLink(label, container, code, type) {\n  const url = \"location.href='https://terjack.space/qrcode\"+type+\"/\"+'?'+code.toString()+'\\'';\n  const btn = L.DomUtil.create('button', '', container);\n  btn.setAttribute('type', 'button');\n  btn.setAttribute('onclick', url);\n  btn.innerHTML = label;\n  return btn;\n}\n\n\nfunction createText(label, container) {\n  const btn = L.DomUtil.create('text', '', container);\n  btn.innerHTML = label;\n  return btn;\n}\n\nexport function pop(name, mecaa, elecc, libre, mcg, location, capa, avaa, broke_e, broke_m){\n  let ava = avaa - (broke_m + broke_e)\n  let resl = 2 * 22 / 7 * 5\n  let pss = ava/capa * resl\n  let meca = mecaa - broke_m\n  let elec = elecc - broke_e\n\n\n  /*   const popHome = L.DomUtil.create('div', ''),\n    popHomePrez = createText('<div><h2>'+name+'</h2><p>vélib mecanique(s) disponnible(s):'+meca+'</p><p>vélib électrique(s) disponnible(s):'+elec+'</p></div>', popHome);\n */\n  const popHome = L.DomUtil.create('div', 'butclass'),\n  popHomePrez = createText(ReactDOMServer.renderToString(<TableComponent name={name} meca={meca} elec={elec} ava={ava} libre={libre} broke_e={broke_e} broke_m={broke_m}/>), popHome);\n\n/*   popHomeProb = createButton('Signaler un problème', popHome);\n */\n  const customOptions =\n      {\n      'maxWidth': '500',\n      'className' : 'custom-popup',\n      };\n\n/* https://medium.com/@pppped/how-to-code-a-responsive-circular-percentage-chart-with-svg-and-css-3632f8cd7705\n */\n  const marker = new L.marker(location, {icon: donutIcon(ava, pss, resl)})\n        .addTo(mcg)\n        .bindPopup(popHome,customOptions).openPopup();\n}\n\n\nexport function popEvent(container, name, mecaa, elecc, libre, location, code, active, avaa, capa, broke_e, broke_m){\n  let ava = avaa - (broke_m + broke_e)\n  let resl = 2 * 22 / 7 * 5\n  let pss = ava/capa * resl\n  let meca = mecaa - broke_m\n  let elec = elecc - broke_e\n\n  const popHome = L.DomUtil.create('div', 'butclass'),\n    popHomePrez = createText(ReactDOMServer.renderToString(<TableComponent name={name} meca={meca} elec={elec} ava={ava} libre={libre} broke_e={broke_e} broke_m={broke_m}/>), popHome),\n    popHomeProb = createButton('Signaler la station', popHome),\n    popHomeProbVel = createButton('Signaler un vélib', popHome);\n\n  const problemSA = L.DomUtil.create('div', ''),\n    problemSAText = createText('station active', problemSA),\n    problemSAOui = createButton('Oui', problemSA),\n    problemSANon = createButton('Non', problemSA);\n\n  const problemVel = L.DomUtil.create('div', ''),\n    problemVelText = createText('le vélib est', problemVel),\n    problemVelMec = createButtonLink('Mécanique', problemVel, code,'M'),\n    problemVelEle = createButtonLink('Électrique', problemVel, code,'E');\n\n  const popHomeStationNonActive = L.DomUtil.create('div', ''),\n    popHomeStationNonActivePrez = createText('<div><h2>'+name+'</h2><p>NON ACTIVE!!!</p></div>', popHomeStationNonActive),\n    popHomeStationNonActiveChang = createButton('Signaler un changement', popHomeStationNonActive);\n\n  const PopQrCode = L.DomUtil.create('div', ''),\n    PopQrCodePrez = createText(ReactDOMServer.renderToString(<html/>), PopQrCode);\n\n  const mcgg = new L.markerClusterGroup();\n\n  const customOptions =\n      {\n      'maxWidth': '1000',\n      'className' : 'custom-popup',\n      };\n  const marker = new L.marker(location, {icon: donutIcon(ava, pss, resl)});\n  if(active==='OUI'){\n    marker.addTo(mcgg);\n    marker.bindPopup(popHome,customOptions).openPopup();\n  }else{\n    console.log('change in state!!!!');\n    marker.addTo(mcgg);\n    marker.bindPopup(popHomeStationNonActive,customOptions).openPopup();\n  }\n    \n\n  container.addLayer(mcgg);\n\n  const buttonChang = L.DomUtil.get(popHomeStationNonActiveChang);\n  L.DomEvent.addListener(buttonChang, 'click', function (e) {\n    marker.closePopup();\n    marker.bindPopup(problemSA,customOptions).openPopup();\n  });\n\n  const buttonSubmit = L.DomUtil.get(popHomeProb);\n  L.DomEvent.addListener(buttonSubmit, 'click', function (e) {\n    marker.closePopup();\n    marker.bindPopup(problemSA,customOptions).openPopup();\n  });\n\n  const buttonSubmitNon = L.DomUtil.get(problemSANon);\n  L.DomEvent.addListener(buttonSubmitNon, 'click', function (e) {\n    marker.closePopup();\n    console.log('station active:NON');\n    ApiState({'velib':'', 'station active':'NON','code':code,'vKey':''});\n    marker.bindPopup(popHomeStationNonActive,customOptions).openPopup();\n  });\n\n  const buttonSubmitOui = L.DomUtil.get(problemSAOui);\n  L.DomEvent.addListener(buttonSubmitOui, 'click', function (e) {\n    marker.closePopup();\n    console.log('station active:OUI');\n    ApiState({'velib':'', 'station active':'OUI','code':code,'vKey':''});\n    marker.bindPopup(popHome,customOptions).openPopup();\n  });\n\n  const buttonVelib = L.DomUtil.get(popHomeProbVel);\n  L.DomEvent.addListener(buttonVelib, 'click', function (e) {\n    marker.closePopup();\n    marker.bindPopup(problemVel,customOptions).openPopup();\n  });\n\n  const buttonVelibMec = L.DomUtil.get(problemVelMec);\n  L.DomEvent.addListener(buttonVelibMec, 'click', function (e) {\n    marker.closePopup();\n\n/*     $('#mymodal').modal('show');\n    ApiState({'velib':'M','station active':'','code':code});\n    marker.bindPopup(PopQrCode,customOptions).openPopup();\n */\n  });\n\n  const buttonVelibEle = L.DomUtil.get(problemVelEle);\n  L.DomEvent.addListener(buttonVelibEle, 'click', function (e) {\n    marker.closePopup();\n\n/*     ApiState({'velib':'E','station active':'','code':code});\n    marker.bindPopup('<div id=\"qr-reader\" style=\"width:500px\"></div> <div id=\"qr-reader-results\"></div>',customOptions).openPopup();\n */\n  });\n\nreturn () => {\n  container.removeLayer(mcgg);\n}\n\n}\n\n{/* <script > var resultContainer = document.getElementById(\"qr-reader-results\"); var lastResult, countResults = 0; function onScanSuccess(qrCodeMessage) {if (qrCodeMessage !== lastResult) {++countResults;lastResult = qrCodeMessage;resultContainer.innerHTML += `<div>[${countResults}] - ${qrCodeMessage}</div>`;}}var html5QrcodeScanner = new Html5QrcodeScanner(\"qr-reader\", { fps: 10, qrbox: 250 });html5QrcodeScanner.render(onScanSuccess);</script>\n */}\n\n/* export function popEvent(container, name, meca, elec, libre, location, code, active){\n  \n  const popHome = L.DomUtil.create('div', ''),\n    popHomePrez = createText('<div><h2>'+name+'</h2><p>vélib mecanique(s) disponnible(s):'+meca+'</p><p>vélib électrique(s) disponnible(s):'+elec+'</p></div>', popHome),\n    popHomeProb = createButton('Signaler un problème', popHome);\n\n  const problemSA = L.DomUtil.create('div', ''),\n    problemSAText = createText('station active', problemSA),\n    problemSAOui = createButton('Oui', problemSA),\n    problemSANon = createButton('Non', problemSA);\n\n  const popHomeStationNonActive = L.DomUtil.create('div', ''),\n    popHomeStationNonActivePrez = createText('<div><h2>'+name+'</h2><p>NON ACTIVE!!!</p></div>', popHomeStationNonActive),\n    popHomeStationNonActiveChang = createButton('Signaler un changement', popHomeStationNonActive);\n\n  const mcgg = new L.markerClusterGroup();\n\n  const customOptions =\n      {\n      'maxWidth': '1000',\n      'className' : 'custom-popup',\n      };\n  const marker = new L.marker(location, {icon: greenIcon});\n  if(active==='OUI'){\n    marker.addTo(mcgg);\n    marker.bindPopup(popHome,customOptions).openPopup();\n  }else{\n    console.log('change in state!!!!');\n    marker.addTo(mcgg);\n    marker.bindPopup(popHomeStationNonActive,customOptions).openPopup();\n  }\n\n\n  const buttonChang = L.DomUtil.get(popHomeStationNonActiveChang);\n  L.DomEvent.addListener(buttonChang, 'click', function (e) {\n    marker.closePopup();\n    marker.bindPopup(problemSA,customOptions).openPopup();\n\n    const buttonSubmitNon = L.DomUtil.get(problemSANon);\n    L.DomEvent.addListener(buttonSubmitNon, 'click', function (e) {\n      marker.closePopup();\n      ApiState({'station active':'NON','code':code});\n      marker.bindPopup(popHomeStationNonActive,customOptions).openPopup();\n    });\n\n    const buttonSubmitOui = L.DomUtil.get(problemSAOui);\n    L.DomEvent.addListener(buttonSubmitOui, 'click', function (e) {\n      marker.closePopup();\n      ApiState({'station active':'OUI','code':code});\n      marker.bindPopup(popHome,customOptions).openPopup();\n\n    });\n  });\n\n  container.addLayer(mcgg);\n\n  const buttonSubmit = L.DomUtil.get(popHomeProb);\n  L.DomEvent.addListener(buttonSubmit, 'click', function (e) {\n    marker.closePopup();\n    marker.bindPopup(problemSA,customOptions).openPopup();\n\n    const buttonSubmitNon = L.DomUtil.get(problemSANon);\n    L.DomEvent.addListener(buttonSubmitNon, 'click', function (e) {\n      marker.closePopup();\n      ApiState({'station active':'NON','code':code});\n      marker.bindPopup(popHomeStationNonActive,customOptions).openPopup();\n    });\n\n    const buttonSubmitOui = L.DomUtil.get(problemSAOui);\n    L.DomEvent.addListener(buttonSubmitOui, 'click', function (e) {\n      marker.closePopup();\n      ApiState({'station active':'OUI','code':code});\n      marker.bindPopup(popHome,customOptions).openPopup();\n\n    });\n\n  });\n  \n  return null\n\n}\n */\n\n\n\n/*   const problemCE = L.DomUtil.create('div', ''),\n    problemCEText = createText('vélo', problemCE),\n    problemCECasse = createButton('Cassé', problemCE),\n    problemCEEndommage = createButton('Endommagé', problemCE);\n */\n\n/*   const endommage = L.DomUtil.create('div', ''),\n    endommageText = createText('<div><h2>'+name+'</h2><p>vélib mecanique(s) disponnible(s):'+meca+'</p><p>vélib électrique(s) disponnible(s):'+elec+'</p></div>', endommage),\n    endommage = createButton('Signaler un problème', endommage);\n\n  const casse = L.DomUtil.create('div', ''),\n    Btn1 = createText('<div><h2>'+name+'</h2><p>vélib mecanique(s) disponnible(s):'+meca+'</p><p>vélib électrique(s) disponnible(s):'+elec+'</p></div>', casse),\n    Btn2 = createButton('Signaler un problème', casse);\n */ \n\n\n/*       const buttonSubmitCasse = L.DomUtil.get(problemCECasse);\n      L.DomEvent.addListener(buttonSubmitCasse, 'click', function (e) {\n        marker.closePopup();\n        marker.bindPopup(popHome,customOptions).openPopup();\n      });\n  \n      const buttonSubmitEndommage = L.DomUtil.get(problemCEEndommage);\n      L.DomEvent.addListener(buttonSubmitEndommage, 'click', function (e) {\n        marker.closePopup();\n        marker.bindPopup(popHome,customOptions).openPopup();\n      });\n */  \n\n\n\n\n/*   return () => {\n    container.removeLayer(mcgg);\n  }\n */\n\n\n\n/* function createInput(label, container) {\n  const btn = L.DomUtil.create('input', '', container);\n  btn.setAttribute('type', 'number');\n  btn.innerHTML = label;\n  return btn;\n}\n */\n\n\n\n\n\n/* export const template_home = '<form id=\"popup-form-home\">\\\n  <table class=\"popup-table-home\">\\\n    <tr class=\"popup-table-home-row\">\\\n      <td colspan=\"4\" id=\"name\" class=\"popup-table-home-title\" style=\"text-align:center;\"> </td>\\\n    </tr>\\\n    <tr class=\"popup-table-home-row\">\\\n      <th colspan=\"2\"> </th>\\\n      <th class=\"popup-table-home-header1\" style=\"text-align:center;\">En état</th>\\\n      <th class=\"popup-table-home-header2\" style=\"text-align:center;\">Cassé</th>\\\n    </tr>\\\n    <tr class=\"popup-table-home-row\">\\\n      <th rowspan=\"2\" class=\"popup-table-home-subject\" style=\"text-align:center;\">Nombre de vélos disponibles</th>\\\n      <th class=\"popup-table-home-sub-subject\" style=\"text-align:center;\">électrique</th>\\\n      <td id=\"nb-elec-ee\" class=\"popup-table-data\"></td>\\\n      <td id=\"nb-elec-c\" class=\"popup-table-data\"></td>\\\n    </tr>\\\n    <tr class=\"popup-table-home-row\">\\\n      <th class=\"popup-table-home-sub-subject\" style=\"text-align:center;\">mécanique</th>\\\n      <td id=\"nb-meca-ee\" class=\"popup-table-data\"></td>\\\n      <td id=\"nb-meca-c\" class=\"popup-table-data\"></td>\\\n    </tr>\\\n    <tr class=\"popup-table-home-row\">\\\n      <th colspan=\"2\" class=\"popup-table-home-subject\" style=\"text-align:center;\">Places Restantes:</th>\\\n      <td colspan=\"2\" id=\"nb-places-dispo\" class=\"popup-table-data\"></td>\\\n    </tr>\\\n  </table>\\\n  <br>\\\n  <center><button id=\"button-submit\" type=\"button\">Signaler un Problème</button></center>\\\n</form>';\n\nexport const template_signalement_pb = '';\nexport const greenIcon = new L.Icon({\n    iconUrl: 'https://cdn.rawgit.com/pointhi/leaflet-color-markers/master/img/marker-icon-2x-green.png',\n    shadowUrl: 'https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.3.4/images/marker-shadow.png',\n    iconSize: [25, 41],\n    iconAnchor: [12, 41],\n    popupAnchor: [1, -34],\n    shadowSize: [41, 41]\n  });\n\nexport const template_endommage = '';\n\nexport const template_casse = '';export const greenIcon = new L.Icon({\n    iconUrl: 'https://cdn.rawgit.com/pointhi/leaflet-color-markers/master/img/marker-icon-2x-green.png',\n    shadowUrl: 'https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.3.4/images/marker-shadow.png',\n    iconSize: [25, 41],\n    iconAnchor: [12, 41],\n    popupAnchor: [1, -34],\n    shadowSize: [41, 41]\n  });\n\n */\n\n/* export const template_home = '<form id=\"popup-form\">\\\n  <label for=\"input-speed\">New speed:</label>\\\n  <input id=\"input-speed\" class=\"popup-input\" type=\"number\" />\\\n  <table class=\"popup-table\">\\\n    <tr class=\"popup-table-row\">\\\n      <th class=\"popup-table-header\">Arc numer:</th>\\\n      <td id=\"value-arc\" class=\"popup-table-data\"></td>\\\n    </tr>\\\n    <tr class=\"popup-table-row\">\\\n      <th class=\"popup-table-header\">Current speed:</th>\\\n      <td id=\"value-speed\" class=\"popup-table-data\"></td>\\\n    </tr>\\\n  </table>\\\n  <button id=\"button-submit\" type=\"button\">Save Changes</button>\\\n</form>';\n */\n/* function layerClickHandler (e) {\n\n  var marker = e.target,\n      properties = e.target.feature.properties;\n  \n  if (marker.hasOwnProperty('_popup')) {\n    marker.unbindPopup();\n  }\n\n  marker.bindPopup(template);\n  marker.openPopup();\n\n  L.DomUtil.get('value-arc').textContent = properties.arc;\n  L.DomUtil.get('value-speed').textContent = properties.speed;\n\n  var inputSpeed = L.DomUtil.get('input-speed');\n  inputSpeed.value = properties.speed;\n  L.DomEvent.addListener(inputSpeed, 'change', function (e) {\n    properties.speed = e.target.value;\n  });\n\n  var buttonSubmit = L.DomUtil.get('button-submit');\n  L.DomEvent.addListener(buttonSubmit, 'click', function (e) {\n    marker.closePopup();\n  });\n\n}\n\nvar map = L.map('leaflet', {\n  'center': [0, 0],\n  'zoom': 0,\n  'layers': [\n    L.tileLayer('http://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}.png', {\n      attribution: '&copy; <a href=\"http://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors, &copy; <a href=\"http://cartodb.com/attributions\">CartoDB</a>'\n    }),\n    L.geoJson({\n      \"type\": \"FeatureCollection\",\n      \"features\": [{\n        \"type\": \"Feature\",\n        \"geometry\": {\n          \"type\": \"Point\",\n          \"coordinates\": [0,0]\n        },\n        \"properties\": {\n          \"arc\": 321,\n          \"speed\": 123\n        }\n      }]\n    }, {\n      onEachFeature: function (feature, layer) {\n        layer.on('click', layerClickHandler);\n      }\n    })\n  ]\n});\n */","import { useEffect } from \"react\";\nimport L from 'leaflet';\nimport { useLeafletContext } from '@react-leaflet/core';\nimport {pop} from \"./Popup\";\nimport \"./style.css\";\n\nrequire('react-leaflet-markercluster/dist/styles.min.css');\nrequire('leaflet.markercluster');\n\n\nfunction MarkerCluster(props) {\n  const context = useLeafletContext();\n\n  const stations=props.pro;\n\n  console.log(stations)\n\n  useEffect(() => {\n\n    const mcg = new L.markerClusterGroup();\n\n    Object.entries(stations).map(([key, station]) => {\n\n\n    const name = station.fields.name\n    const meca = station.fields.mechanical.toString()\n    const elec = station.fields.ebike.toString()\n    const libre = station.fields.numdocksavailable.toString()\n    const location = station.fields.coordonnees_geo\n    const capa = station.fields.capacity\n    const ava = station.fields.numbikesavailable\n    const broke_e = station.fields.broke_ebike.length\n    const broke_m = station.fields.broke_mechanical.length\n\n    pop(name, meca, elec, libre, mcg, location, capa, ava, broke_e, broke_m)\n\n    });\n    \n    const container = context.layerContainer || context.map\n    container.addLayer(mcg);\n\n    return () => {\n      container.removeLayer(mcg);\n    }\n\n  }, [stations]);\n\n  return null\n  \n}\n\nexport default MarkerCluster;","import axios from 'axios';\nimport {popEvent} from \"./Popup\";\n\nfunction Api(container, control, ll, i) {\n  const option = {\n    method: 'post',\n    url: 'https://terjack.space/coor',\n    data: JSON.stringify(ll),\n    responseType: 'json',\n  };\n  axios(option)\n  .then(function (response) {\n    console.log(response.data);\n    console.log('here we go!!!!');\n\n    Object.entries(response.data).map(([key, station]) => {\n    const name = station.name\n    const meca = station.mechanical.toString()\n    const elec = station.ebike.toString()\n    const code = station.stationcode\n    const libre = station.numdocksavailable.toString()\n    const location = station.coordonnees_geo\n    console.log(location);\n    const active = station.is_returning\n    const capa = station.capacity\n    const ava = station.numbikesavailable\n    const broke_e = station.broke_ebike.length\n    console.log(broke_e);\n    const broke_m = station.broke_mechanical.length\n\n    if(key === '0'){\n      control.spliceWaypoints(i, 1, location);\n      popEvent(container, name, meca, elec, libre, location, code, active, ava, capa, broke_e, broke_m);\n    }else{\n      popEvent(container, name, meca, elec, libre, location, code, active, ava, capa, broke_e, broke_m);\n    }\n    });\n    if(i === 2) {\n      control.spliceWaypoints(3 , 1, ll);\n    }\n  })\n  .catch(function (error) {\n    console.log(error);\n  });\n\n  return () => {\n    container.removeControl(control);\n  }\n\n}\n\n\nexport default Api;","import { useLeafletContext } from '@react-leaflet/core'\nimport { useEffect, useRef } from \"react\";\nimport L from 'leaflet';\nimport {blackIcon, redIcon} from \"./Icon\";\n\nimport { geosearch } from 'esri-leaflet-geocoder';\n\nimport Api from './Api';\n\nimport 'esri-leaflet-geocoder/dist/esri-leaflet-geocoder.css'\n\nrequire('leaflet-routing-machine');\n\nrequire('leaflet-control-geocoder');\n\n\n\nfunction Rout() {\n\n    const context = useLeafletContext();\n    const refcount = useRef(0);\n\n    useEffect(() => {\n\n        const control = L.Routing.control({\n            show: false,\n\n            geocoder: L.Control.Geocoder.nominatim(),\n            \n            router: new L.Routing.osrmv1({\n                serviceUrl: \"https://terjack.space/route/v1\",\n                profile: 'cycling',\n            }),\n            routeWhileDragging: true,\n            reverseWaypoints: true,\n            createMarker: function(i, wp, nWps) {\n                if (i === 0 ) {\n                  // here change the starting icons\n                  return L.marker(wp.latLng, {\n                    icon: redIcon // here pass the custom marker icon instance\n                  }).bindPopup(\"start\").openPopup();\n                } else if ( i === 3) { // remplacer nwps - 1 par 3 pour seulement montrer la destination\n                  // here change the ending icons\n                  return L.marker(wp.latLng, {\n                    icon: redIcon // here pass the custom marker icon instance\n                  }).bindPopup(\"end\").openPopup();\n                } else {\n                    // here change all the others\n                    return L.marker(wp.latLng, {\n                      icon: blackIcon\n                    });\n                  }\n            }\n            })\n\n        const container = context.layerContainer || context.map;\n        container.addControl(control);\n        const err = L.Routing.errorControl(control);\n        container.addControl(err);\n        const search = geosearch({position : 'topleft', useMapBounds : false, zoomToResult : false, expanded : true, placeholder : 'entre ta destination!', title : 'Destination'});\n        container.addControl(search);\n\n        search.on('results', function(e) {\n          console.log(e);\n\n/*           refcount.current +=1;\n */          \n          Api(container, control,e.latlng, 2);\n        });\n\n/*         container.on('layeradd', function(e) {\n          console.log(e);\n          if(e.layer._leaflet_id === 105){\n            if(e.layer._latlng.lat !== 0){\n              console.log(e.layer._latlng);\n              control.spliceWaypoints(0, 1, e.layer._latlng);\n              Api(container, control,e.layer._latlng, 1);\n            }\n          }\n        });\n */\n        container.on('locationfound', function(e) {\n          console.log(e.latlng);\n\n/*           if(refcount.current === 1){\n */\n          if(refcount.current === 0){\n\n            console.log(refcount);\n            control.spliceWaypoints(0, 1, e.latlng);\n            Api(container, control,e.latlng, 1);\n            refcount.current +=1;\n\n/*             refcount.current = 0;\n */            \n          }\n        });\n    \n        container.on('locationerror', function(e) {\n          alert(e.message);\n        });\n        \n        return () => {\n            container.removeControl(control);\n            container.removeControl(err);\n            container.removeControl(search);\n          }\n      \n    }, []);\n\n    return null\n\n}\n\nexport default Rout;\n\n\n/* function createButton(label, container) {\n    var btn = L.DomUtil.create('button', '', container);\n    btn.setAttribute('type', 'button');\n    btn.innerHTML = label;\n    return btn;\n}\n */\n\n/*         const nb = control.getWaypoints().length\n        console.log(nb)\n */\n\n/*         container.on('click', function(e) {\n\n            const ccc = L.DomUtil.create('div'),\n                startBtn = createButton('Start from this location', ccc),\n                destBtn = createButton('Go to this location', ccc);\n        \n            L.popup()\n                .setContent(ccc)\n                .setLatLng(e.latlng)\n                .openOn(container);\n\n            L.DomEvent.on(startBtn, 'click', function() {\n                control.spliceWaypoints(0, 1, e.latlng);\n                Api(container, control,e.latlng, 1);\n                container.closePopup();\n            });\n            L.DomEvent.on(destBtn, 'click', function() {\n\n                Api(container, control,e.latlng, 2);\n                container.closePopup();\n            });\n\n        });\n */\n\n/*         const lc = new Locate();\n */\n\n/*         const gps = new L.Control.Gps({autoActive: true, autoCenter: true, maxZoom: 17, autoUpdate: 1, position: 'topleft'} );\n        gps\n        .on('gps:located', function(e) {\n            console.log(e.latlng)\n            console.log(count)\n        })\n        .on('gps:disabled', function(e) {\n            e.marker.closePopup()\n        });\n        container.addControl(gps);\n */\n/*         if(count){\n          control.spliceWaypoints(0, 1, container.getCenter());\n          Api(container, control,container.getCenter(), 1);  \n        }\n */\n/*         container.addControl(lc);\n */\n/*         lc.start();\n */        \n/*         container.locate();\n */\n/*         container.on('layeradd', function(e) {\n          console.log(e)\n          if(e.layer._leaflet_id === 105){\n            setcount(true)\n            console.log(count)\n          }\n        });\n */\n/*         container.on('layeradd', function(e) {\n          if(e.layer._leaflet_id === 105){\n            console.log(e.layer._latlng.lat)\n            const ll = e.layer._latlng\n            console.log(e)\n            console.log(ll)\n\n            console.log(container.getCenter())\n            control.spliceWaypoints(0, 1, e.layer._latlng)\n            Api(container, control,e.layer._latlng, 1);\n          }\n        });\n */\n","import { useLeafletContext } from '@react-leaflet/core';\nimport { useEffect } from \"react\";\nimport L from 'leaflet';\n\nimport 'leaflet-gps'\n\nfunction Gps() {\n    const context = useLeafletContext();\n    useEffect(() => {\n        const gps = new L.Control.Gps({autoActive: true, autoCenter: true, maxZoom: 17, autoUpdate: 1, position: 'bottomleft'} );\n        const container = context.layerContainer || context.map;\n\n/*         gps\n        .on('gps:located', function(e) {\n            console.log('e.latlng.lat')\n        })\n        .on('gps:disabled', function(e) {\n            e.marker.closePopup()\n        });\n */\n        container.addControl(gps);\n        \n        return () => {\n            container.removeControl(gps);\n          }\n\n    });\n\n    return null\n}\n\nexport default Gps;","import React from \"react\";\nimport \"./App.css\";\nimport useSwr from \"swr\";\nimport MarkerCluster from './MarClus'\n\n/* import LocationMarker from './Loca'\n */\nimport {MapContainer, LayersControl, TileLayer} from 'react-leaflet'\nimport Rout from './Routeur'\nimport Gps from './Gps'\n\nimport logo from \"./velo-lulu/ezgif.com-crop.gif\";\n\nconst fetcher = (...args) => fetch(...args).then(response => response.json());\n\nconst position = [48.8566, 2.3522];\n\nfunction App() {\n\n    const url =\n    \"https://terjack.space/popup\";\n\n    const { data: result, error } = useSwr(url, { fetcher });\n    if (error) return <h1>Something went wrong!</h1>\n    if (!result) return <div><h1>Loading... </h1><h1><img src={logo} width=\"400\" height=\"400\"  id=\"masuperimage\"/></h1></div>\n    \n    const stations = result ;\n\n\n    return(\n\n        <MapContainer center={position} zoom={12} zoomControl={false}>\n          \n        <Rout />\n\n        <LayersControl position=\"bottomleft\">\n\n          <LayersControl.BaseLayer name=\"Normal\">\n              <TileLayer\n                url=\"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\"\n                attribution='&copy; <a href=\"http://osm.org/copyright\">OpenStreetMap</a> contributors'\n                />\n          </LayersControl.BaseLayer>\n\n          <LayersControl.BaseLayer checked name=\"Gris\">\n                <TileLayer \n                  url='http://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}.png'\n                  attribution= '&copy; <a href=\"http://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors, &copy; <a href=\"http://cartodb.com/attributions\">CartoDB</a>'\n                />\n          </LayersControl.BaseLayer>\n\n          <LayersControl.Overlay name=\"Montrer toutes les stations\">\n\n            <MarkerCluster pro={stations} />\n\n          </LayersControl.Overlay>\n\n        </LayersControl>\n\n        <Gps />\n\n        </MapContainer>\n      \n    )\n}\n\nexport default App;","import React, { Component } from 'react'\nimport QrReader from 'react-qr-reader'\nimport ApiState from \"./ApiState\"\n\nexport class ExampleM extends Component {\n  constructor(props){\n    super(props)\n    this.state = {\n      delay: 500,\n      result: 'No result',\n    }\n\n    this.handleScan = this.handleScan.bind(this)\n  }\n  handleScan(result){\n    if(result){\n      this.setState({ result });\n      console.log({'velib':'M','station active':'','code':window.location.search,'vKey':this.state.result});\n      ApiState({'velib':'M','station active':'','code':window.location.search,'vKey':this.state.result});\n      this.props.history.push(\"/\");\n    }\n  }\n  handleError(err){\n    console.error(err)\n  }\n  render(){\n    const previewStyle = {\n      height: 240,\n      width: 320,\n    }\n\n    return(\n      <div>\n        <p>Scannez le QrCode situé sur le cadre du vélib' cassé!</p>\n        <p>retournez la selle pour prévenir les autres utilisateurs please ;)</p>\n        <QrReader\n          delay={this.state.delay}\n          style={previewStyle}\n          onError={this.handleError}\n          onScan={this.handleScan}\n          />\n      </div>\n    )\n  }\n}\n\nexport class ExampleE extends Component {\n  constructor(props){\n    super(props)\n    this.state = {\n      delay: 500,\n      result: 'No result',\n    }\n\n    this.handleScan = this.handleScan.bind(this)\n  }\n  handleScan(result){\n    if(result){\n      this.setState({ result });\n      console.log({'velib':'E','station active':'','code':window.location.search,'vKey':this.state.result});\n      ApiState({'velib':'E','station active':'','code':window.location.search,'vKey':this.state.result});\n      this.props.history.push(\"/\");\n    }\n  }\n  handleError(err){\n    console.error(err)\n  }\n  render(){\n    const previewStyle = {\n      height: 240,\n      width: 320,\n    }\n\n    return(\n      <div>\n        <p>Scannez le QrCode situé sur le cadre du vélib' cassé!</p>\n        <p>retournez la selle pour prévenir les autres utilisateurs please ;)</p>\n        <QrReader\n          delay={this.state.delay}\n          style={previewStyle}\n          onError={this.handleError}\n          onScan={this.handleScan}\n          />\n      </div>\n    )\n  }\n}","import React, { Component } from 'react';\nimport { BrowserRouter as Router, Switch, Route } from 'react-router-dom';\nimport App from './App'\nimport {ExampleE, ExampleM} from './QrCode'\n\nclass RR extends Component {\n    render() {\n      return (\n        <Router>\n          <div>\n            <Switch>\n                <Route exact path='/' component={App} />\n                <Route path='/qrcodeE' component={ExampleE} />\n                <Route path='/qrcodeM' component={ExampleM} />\n            </Switch>\n          </div>\n        </Router>\n      );\n    }\n  }\n  \n  export default RR;","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\n\n/* import App from './App';\n */\nimport * as serviceWorker from './serviceWorker';\nimport RR from './ReactRout'\n\nimport { BrowserRouter } from 'react-router-dom';\n\nReactDOM.render(\n  <React.StrictMode>\n      <BrowserRouter>\n        <RR />\n      </BrowserRouter>\n  </React.StrictMode>,\n  document.getElementById('map')\n);\n\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}